#!/usr/bin/env bash

validation() {
  if [[ -z ${SITENAME} ]]; then
    echo -e "\n${RED}You need to pass a sitename.${COLOR_ENDING}\n"
  elif [[ ! ${SITENAME} =~ [^[:digit:]] ]]; then
    echo -e "\n${RED}You cannot use only digits.${COLOR_ENDING}\n"
  elif [[ ${SITENAME} == *['!'@#\$%^\&*()_+-]* ]]; then
    echo -e "\n${RED}You cannot use special characters.${COLOR_ENDING}\n"
  fi
}

usage() {
  return_version
cat <<EOF

${ORANGE_HELP}Usage:${COLOR_ENDING_HELP}
  drucker [command] [app,...] [git_ref]

  The [app,...] argument is only valid for the following commands:
    create, delete, reinstall, import, blt, lightning, reservoir, dev, prod

  The [git_ref] argument is only valid for the 'create' command

 ${ORANGE_HELP}containers${COLOR_ENDING_HELP}
  ${GREEN_HELP}health${COLOR_ENDING_HELP}       Runs a service healthcheck
  ${GREEN_HELP}start${COLOR_ENDING_HELP}        Starts all drucker containers
  ${GREEN_HELP}stop${COLOR_ENDING_HELP}         Stops all drucker containers
  ${GREEN_HELP}restart${COLOR_ENDING_HELP}      Restarts all drucker containers

 ${ORANGE_HELP}app${COLOR_ENDING_HELP}
  ${GREEN_HELP}create${COLOR_ENDING_HELP}       Spins up a ready-to-use Drupal install
  ${GREEN_HELP}delete${COLOR_ENDING_HELP}       Deletes an arbitrary docroot
  ${GREEN_HELP}reinstall${COLOR_ENDING_HELP}    Reinstalls Drupal
  ${GREEN_HELP}import${COLOR_ENDING_HELP}       Imports an app from the web container's import directory
  ${GREEN_HELP}blt${COLOR_ENDING_HELP}          Spins up a ready-to-use BLT build

 ${ORANGE_HELP}distributions${COLOR_ENDING_HELP}
  ${GREEN_HELP}lightning${COLOR_ENDING_HELP}    Spins up a ready-to-use Lightning install
  ${GREEN_HELP}reservoir${COLOR_ENDING_HELP}    Spins up a ready-to-use Reservoir install

 ${ORANGE_HELP}mode${COLOR_ENDING_HELP}
  ${GREEN_HELP}dev${COLOR_ENDING_HELP}          Prepare app(s) for development work with no caching and helper modules enabled.
  ${GREEN_HELP}prod${COLOR_ENDING_HELP}         Opinionated setup with all known performance best practices enabled.

 ${ORANGE_HELP}util${COLOR_ENDING_HELP}
  ${GREEN_HELP}version${COLOR_ENDING_HELP}      Returns the drucker version
  ${GREEN_HELP}tests${COLOR_ENDING_HELP}        Runs the Ansible test suite
EOF
exit 0
}
